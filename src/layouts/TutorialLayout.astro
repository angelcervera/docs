---
import PageContent from '../components/PageContent/PageContent.astro';
import TutorialNav from '../components/tutorial/TutorialNav.astro';
import { getLanguageFromURL } from '../util';
import { getPreviousAndNext } from '../util/getNavLinks';
import { getTutorialPages } from '../util/getTutorialPages';
import BaseLayout from './BaseLayout.astro';

const lang = getLanguageFromURL(Astro.url.pathname);
const tutorialPages = getTutorialPages(await Astro.glob(`../pages/*/tutorial/**/*.md`), lang);

const { previous, next } = getPreviousAndNext(
	tutorialPages.map((page) => ({ text: page.frontmatter.title, slug: page.slug })),
	Astro
);
---

<BaseLayout {...Astro.props}>
	<TutorialNav slot="secondary-sidebar" />
	<PageContent content={Astro.props.content} {...{ previous, next }}>
		<slot />
	</PageContent>
</BaseLayout>
